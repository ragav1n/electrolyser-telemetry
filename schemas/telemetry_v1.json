{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Electrolyser Telemetry v1",
  "type": "object",
  "required": ["ts", "site_id", "stack_id", "sensor_id", "metrics"],
  "properties": {
    "ts": {"type": "string", "format": "date-time"},
    "site_id": {"type": "string"},
    "stack_id": {"type": "string"},
    "sensor_id": {
      "type": "string",
      "enum": [
        "solar_irradiance","wind_speed","stack_temperature","electrolyte_conductivity",
        "pressure","h2_flow_rate","h2_purity","o2_in_h2","dew_point","dc_current","dc_voltage"
      ]
    },
    "metrics": {
      "type": "object",
      "properties": {
        "value": {"type": "number"},
        "unit": {"type": "string"}
      },
      "required": ["value","unit"],
      "additionalProperties": false
    },
    "quality": {
      "type": "object",
      "properties": {
        "qos": {"type": "integer", "minimum": 0, "maximum": 2},
        "status": {"type": "string", "enum": ["OK","WARN","FAULT"]},
        "seq": {"type": "integer", "minimum": 0}
      },
      "required": ["qos","status","seq"],
      "additionalProperties": false
    },
    "meta": {
      "type": "object",
      "properties": {
        "firmware": {"type": "string"},
        "simulated": {"type": "boolean"}
      },
      "additionalProperties": true
    }
  },
  "additionalProperties": false
}

